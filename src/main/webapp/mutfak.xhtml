<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <f:metadata>
            <f:viewParam name="name" value="#{personServiceBean.username}"></f:viewParam>
            <f:viewAction action="#{personServiceBean.init}"></f:viewAction>
            <f:viewAction action="#{galleryServiceBean.init}"></f:viewAction>
        </f:metadata>
    </h:head>
    <h:body>

        <ui:composition template="/WEB-INF/assets/masterPage.xhtml">
            <ui:define name="head">
                <link rel="stylesheet" href="css/jquery.fancybox.css"/></ui:define>>
            <ui:define name="title">Mutfak</ui:define>
            <ui:define name="breadcrumbs">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="breadcrumbs">
                        <p><a href="#">Anasayfa</a> <i class="icons icon-right-dir"></i> Mutfak <h:outputText value="#{personServiceBean.person.username}"></h:outputText></p>
                    </div>
                </div>
            </ui:define>
            <ui:define name="body">
                <h:outputText value="#{galleryManagerBean.resultGallery}" escape="false"></h:outputText>
                <h:outputText value="#{foodManagerBean.resultFood}" escape="false"></h:outputText>
                <div id="product-single">
                    <div class="product-single">
                        <div class="row">
                            <ui:fragment rendered="#{not(personServiceBean.person eq null)}" >
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="tabs">
                                        <div class="tab-heading margin-heading">
                                            <a href="#tab1" class="button big">Yemek Listesi</a>
                                            <a href="#tab2" class="button big">Siparişler</a>
                                            <a href="#tab3" class="button green big">Yemek Ekle</a>
                                        </div>
                                        <div class="tab-content no-padding">
                                            <div id="tab1">
                                                <ui:fragment rendered="#{foodServiceBean.foodList eq null}">

                                                    <h2>Henüz yemek girilmemiş :(</h2>
                                                </ui:fragment>
                                                <ui:fragment rendered="#{not(foodServiceBean.foodList eq null)}">
                                                    <table class="orderinfo-table">

                                                        <tr>
                                                            <th style="width: 100px">ID</th>
                                                            <th>Adı</th>
                                                            <th>Kategorisi</th>
                                                            <th style="width: 100px">Süre</th>
                                                            <th style="width: 100px">İşlemler</th>
                                                        </tr>
                                                        <h:form>
                                                            <ui:repeat var="food" value="#{foodServiceBean.foodList}">
                                                                <tr>
                                                                    <td>#{food.id}</td>
                                                                    <td><h:outputText value="#{food.name}" ></h:outputText></td>
                                                                    <td>#{food.foodCategory.name}</td>
                                                                    <td><h:outputText value="#{food.preparationTime}"></h:outputText></td>
                                                                    <td><h:commandLink class="red margin-right-10 left"  action="#{foodManagerBean.delete(food)}" value="Sil"></h:commandLink><a href="" class="green">Düzenle</a></td>
                                                                </tr>
                                                            </ui:repeat>
                                                        </h:form>
                                                    </table>
                                                </ui:fragment>
                                            </div>
                                            <div id="tab2">
                                                tab2
                                            </div>
                                            <div id="tab3">
                                                <div class="col-lg-12 col-md-12 col-sm-12 register-account">
                                                    <h:form  enctype="multipart/form-data">
                                                        <div class="page-content">
                                                            <div class="row">
                                                                <div class="col-lg-12 col-md-12 col-sm-12">
                                                                    <p><strong>Yemek Detayları</strong></p>
                                                                </div>
                                                                <div class="col-lg-2 col-md-2 col-sm-2">
                                                                    <p>Adı*</p>
                                                                </div>
                                                                <div class="col-lg-10 col-md-10 col-sm-10">
                                                                    <h:inputText id="foodname" value="#{foodManagerBean.food.name}" required="true" requiredMessage="Lütfen yemek isminin giriniz."/>
                                                                    <h:message  class="alert-span alert-danger" for="foodname"></h:message>
                                                                </div>	

                                                            </div>

                                                            <div class="row">
                                                                <div class="col-lg-2 col-md-2 col-sm-2">
                                                                    <p>Tanıtımı</p>
                                                                </div>
                                                                <div class="col-lg-10 col-md-10 col-sm-10">
                                                                    <h:inputTextarea rows="2" value="#{foodManagerBean.food.description}"/>
                                                                </div>	
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-2 col-md-2 col-sm-2">
                                                                    <p>Malzemeler</p>
                                                                </div>
                                                                <div class="col-lg-10 col-md-10 col-sm-10">
                                                                    <h:inputTextarea rows="4" value="#{foodManagerBean.food.materials}"/>
                                                                </div>	
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-2 col-md-2 col-sm-2">
                                                                    <p>Resimler</p>
                                                                </div>
                                                                <div class="col-lg-10 col-md-10 col-sm-10">
                                                                    <p:fileUpload class="" id="foodimage" invalidSizeMessage="Dosya boyutu çok fazla"  fileLimitMessage="10 resimden fazla yüklenemez" cancelLabel="İptal" invalidFileMessage="Geçersiz dosya tipi."  uploadLabel="Yükle" label="Dosya Seç"  fileUploadListener="#{foodManagerBean.img.upload}" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" fileLimit="10" multiple="true" sizeLimit="3024000" dragDropSupport="true"></p:fileUpload>
                                                                    <h:message class="alert-span alert-danger" for="foodimage" ></h:message>
                                                                </div>
                                                                <div class="col-lg-2 col-md-2 col-sm-2">

                                                                </div>
                                                                <div class="col-lg-10 col-md-10 col-sm-10">
                                                                    <strong><p>Çoklu resim yükleyebilirsiniz.</p></strong>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-2 col-md-2 col-sm-2">
                                                                    <p>Kategori*</p>
                                                                </div>
                                                                <div class="col-lg-5 col-md-5 col-sm-5">
                                                                    <h:selectOneMenu id="foodcategory" required="true" requiredMessage="Lütfen yemeğin kategorisini giriniz."  value="#{foodManagerBean.foodCategoryid}">
                                                                        <f:selectItems value="#{categoryServiceBean.categories}" var="category" itemValue="#{category.id}" itemLabel="#{category.name}"></f:selectItems>
                                                                    </h:selectOneMenu>

                                                                </div>
                                                                <h:message class="alert-span alert-danger" for="foodcategory"></h:message>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-2 col-md-2 col-sm-2">
                                                                    <p>Birim Miktar*</p>
                                                                </div>
                                                                <div  class="col-lg-2 col-md-2 col-sm-2">
                                                                    <h:inputText id="foodquantity" value="#{foodManagerBean.quantityPrice.quantity}"  required="true" requiredMessage="Lütfen yemeğin birim miktarınını giriniz." />

                                                                </div>
                                                                <div  class="col-lg-5 col-md-5 col-sm-5">
                                                                    <strong><p>Kg,gr ve kişi sayısı gibi bilgi giriniz.</p></strong>
                                                                </div>
                                                                <h:message for="foodquantity" class="alert-span alert-danger"></h:message>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-2 col-md-2 col-sm-2">
                                                                    <p>Hazırlık Süresi*</p>
                                                                </div>
                                                                <div   class="col-md-2 col-sm-2">
                                                                    <p:inputMask value="#{foodManagerBean.food.preparationTime}" id="date" required="true" requiredMessage="Lütfen yemek hazırlanma süresini giriniz."   mask="99:99" />
                                                                </div>
                                                                <div class="col-lg-5 col-md-5 col-sm-5">
                                                                    <strong><p>Saat:Dakika şeklinde giriniz</p></strong>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-2 col-md-2 col-sm-2">
                                                                    <p>Birim Fiyatı*</p>
                                                                </div>
                                                                <div   class="col-md-2 col-sm-2">
                                                                    <p:inputMask value="#{foodManagerBean.price}"  mask="999.99"  required="true" requiredMessage="Lütfen yemek birim fiyatını giriniz." id="foodprice"/>

                                                                </div>
                                                                <h:message for="foodprice" class="alert-span alert-danger"></h:message>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-12 col-md-12 col-sm-12">
                                                                    <h:commandButton class="big" action="#{foodManagerBean.save()}" value="Kaydet"></h:commandButton>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </h:form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ui:fragment>
                            <ui:fragment rendered="#{(personServiceBean.username eq null)or (personServiceBean.person eq null)}">
                                <div class="col-lg-7 col-md-7 col-sm-7">
                                    <h2>Üzgünüm kimseyi bulamadım ben :( </h2>
                                </div>
                            </ui:fragment>
                        </div>
                    </div>
                </div>
                <ui:fragment rendered="#{shiroservice.person.id eq galleryServiceBean.kithckengallery.user.id}">
                    <div class="modal fade " id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">Resim Ekle</h4>
                                </div><h:form id="register-form"  enctype="multipart/form-data">

                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-lg-1 col-md-1 col-sm-1">
                                                <p>Resim</p>
                                            </div>
                                            <div class="col-lg-11 col-md-11 col-sm-11">
                                                <div class="iconic-input">
                                                    <p:fileUpload class="" invalidSizeMessage="Dosya boyutu çok fazla"  fileLimitMessage="10 resimden fazla yüklenemez" cancelLabel="İptal" invalidFileMessage="Geçersiz dosya tipi."  uploadLabel="Yükle" label="Dosya Seç"  fileUploadListener="#{galleryManagerBean.img.upload}" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" fileLimit="10" multiple="true" sizeLimit="3024000" dragDropSupport="true"></p:fileUpload>
                                                </div>
                                            </div>	
                                        </div>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">İptal</button>
                                        <h:commandButton  class="btn btn-primary" action="#{galleryManagerBean.kitchenGalleryMultiSave()}" value="Kaydet"></h:commandButton>
                                    </div>
                                </h:form>
                            </div>
                        </div>
                    </div>
                </ui:fragment>
            </ui:define>
            <ui:define name="sidebar">
                <div class="products-row row">                    
                    <div class="carousel-heading">
                        <h4>Mutfak 
                            <ui:fragment rendered="#{shiroservice.person.id eq galleryServiceBean.kithckengallery.user.id}"><a href="" class="small_light_white right block white" style="font-size: 70%; margin-top: 5px;;" data-toggle="modal" data-target="#myModal">Resim ekle</a></ui:fragment> </h4>                       
                    </div>            
                    <div id="product-slider">
                        <ul class="slides">
                            <li>
                                <ui:fragment rendered="#{not(galleryServiceBean.kithckengallery.pictures.size()eq 0)}"  >
                                    <img class="cloud-zoom kitchenimg" src="img/#{galleryServiceBean.kithckengallery.pictures.get(0).path}" data-large="img/#{galleryServiceBean.kithckengallery.pictures.get(0)}" alt="" />
                                    <a class="fullscreen-button" href="img/#{galleryServiceBean.kithckengallery.pictures.get(0).path}">
                                        <div class="product-fullscreen">
                                            <i class="icons icon-resize-full-1"></i>
                                        </div>
                                    </a>
                                </ui:fragment>
                                <ui:fragment rendered="#{galleryServiceBean.kithckengallery.pictures.size()eq 0}"  >
                                    <img class="cloud-zoom kitchenimg" src="img/fff.jpg" data-large="img/fff.jpg" alt="" />
                                    <a class="fullscreen-button" href="img/fff.jpg">
                                        <div class="product-fullscreen">
                                            <i class="icons icon-resize-full-1"></i>
                                        </div>
                                    </a>
                                </ui:fragment>
                            </li>
                        </ul>
                    </div>
                    <div id="product-carousel">
                        <ul class="slides">
                            <ui:repeat value="#{galleryServiceBean.kithckengallery.pictures}" var="pictures">
                                <li>
                                    <a class="fancybox" rel="product-images" href="img/#{pictures.path}"></a>
                                    <img src="img/#{pictures.path}"  data-large="img/#{pictures.path}" alt=""/>
                                </li>
                            </ui:repeat>
                        </ul>
                        <div class="product-arrows">
                            <div class="left-arrow">
                                <i class="icons icon-left-dir"></i>
                            </div>
                            <div class="right-arrow">
                                <i class="icons icon-right-dir"></i>
                            </div>
                        </div>

                    </div>

                </div>

            </ui:define>
        </ui:composition>
    </h:body>
</html>