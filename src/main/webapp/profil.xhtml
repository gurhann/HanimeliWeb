<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <f:metadata>
            <f:viewParam name="name" value="#{personServiceBean.username}"></f:viewParam>
            <f:viewAction action="#{personServiceBean.init}"></f:viewAction>
            <f:viewAction action="#{galleryServiceBean.init}"></f:viewAction>
        </f:metadata>
    </h:head>
    <h:body>

        <ui:composition template="/WEB-INF/assets/masterPage.xhtml">
            <ui:define name="head">
                <link rel="stylesheet" href="css/jquery.fancybox.css"/></ui:define>>
            <ui:define name="title">Profil</ui:define>
            <ui:define name="breadcrumbs">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="breadcrumbs">
                        <p><a href="#">Anasayfa</a> <i class="icons icon-right-dir"></i> Profil <h:outputText value="#{personServiceBean.person.username}"></h:outputText></p>
                    </div>
                </div>

            </ui:define>
            <ui:define name="body">
                <h:outputText value="#{galleryManagerBean.resultGallery}" escape="false"></h:outputText>
                <div id="product-single">
                    <div class="product-single">
                        <div class="row">
                            <ui:fragment rendered="#{not(personServiceBean.person eq null)}" >
                                <div class="col-lg-3 col-md-4 col-sm-4 product-single-image">


                                    <h:graphicImage value="img/#{personServiceBean.person.avatarPath}" style="display: inline; visibility: visible;"></h:graphicImage>                                                

                                </div>
                                <div class="col-lg-9 col-md-7 col-sm-7 product-single-info" style="padding-right: 25px;">
                                    <h2><h:outputText value="#{personServiceBean.person.name} #{personServiceBean.person.lastname}"></h:outputText> <a class="smalla" href="updateprofil.jsf">Profil Güncelle</a></h2>
                                    <div class="rating-box">
                                        <span>Müşteri Memnuniyeti </span>
                                        <div class="rating readonly-rating" data-score="4"></div>
                                    </div>
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td><b>E-mail:</b></td>
                                                <td><span class="green"><h:outputText value="#{personServiceBean.person.email}"></h:outputText></span></td>
                                            </tr>
                                            <tr>
                                                <td><b>Tel No:</b></td>
                                                <td><h:outputText value="#{personServiceBean.person.telNo}"></h:outputText></td>
                                            </tr>
                                            <tr>
                                                <td><b>Yaşadığı Yer</b></td>
                                                <td><h:outputText value="#{personServiceBean.person.adres.town.country.name} #{personServiceBean.person.adres.town.name}"></h:outputText></td>
                                            </tr>
                                        </tbody></table>
                                    <strong><b>Adres</b></strong>
                                    <span ><h:outputText value="#{personServiceBean.person.adres.content}"/></span>
                                </div>
                            </ui:fragment>
                            <ui:fragment rendered="#{(personServiceBean.username eq null)or (personServiceBean.person eq null)}">
                                <div class="col-lg-7 col-md-7 col-sm-7">
                                    <h2>Üzgünüm kimseyi bulamadım ben :( </h2>
                                </div>
                            </ui:fragment>
                        </div>
                    </div>
                </div>
                <ui:fragment rendered="#{shiroservice.person.id eq galleryServiceBean.kithckengallery.user.id}">
                    <div class="modal fade " id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">Resim Ekle</h4>
                                </div><h:form id="register-form"  enctype="multipart/form-data">

                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-lg-1 col-md-1 col-sm-1">
                                                <p>Resim</p>
                                            </div>
                                            <div class="col-lg-11 col-md-11 col-sm-11">
                                                <div class="iconic-input">
                                                    <p:fileUpload class="" invalidSizeMessage="Dosya boyutu çok fazla"  fileLimitMessage="10 resimden fazla yüklenemez" cancelLabel="İptal" invalidFileMessage="Geçersiz dosya tipi."  uploadLabel="Yükle" label="Dosya Seç"  fileUploadListener="#{galleryManagerBean.img.upload}" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" fileLimit="10" multiple="true" sizeLimit="3024000" dragDropSupport="true"></p:fileUpload>
                                                </div>
                                            </div>	
                                        </div>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">İptal</button>
                                        <h:commandButton  class="btn btn-primary" action="#{galleryManagerBean.kitchenGalleryMultiSave()}" value="Kaydet"></h:commandButton>
                                    </div>
                                </h:form>
                            </div>
                        </div>
                    </div>
                </ui:fragment>
            </ui:define>
            <ui:define name="sidebar">
                <div class="products-row row">                    
                    <div class="carousel-heading">
                        <h4>Mutfak 
                            <ui:fragment rendered="#{shiroservice.person.id eq galleryServiceBean.kithckengallery.user.id}"><a href="" class="small_light_white right block white" style="font-size: 70%; margin-top: 5px;;" data-toggle="modal" data-target="#myModal">Resim ekle</a></ui:fragment> </h4>                       
                    </div>            
                    <div id="product-slider">
                        <ul class="slides">
                            <li>
                                <ui:fragment rendered="#{not(galleryServiceBean.kithckengallery.pictures.size()eq 0)}"  >
                                <img class="cloud-zoom kitchenimg" src="img/#{galleryServiceBean.kithckengallery.pictures.get(0).path}" data-large="img/#{galleryServiceBean.kithckengallery.pictures.get(0)}" alt="" />
                                <a class="fullscreen-button" href="img/#{galleryServiceBean.kithckengallery.pictures.get(0).path}">
                                    <div class="product-fullscreen">
                                        <i class="icons icon-resize-full-1"></i>
                                    </div>
                                </a>
                                </ui:fragment>
                                 <ui:fragment rendered="#{galleryServiceBean.kithckengallery.pictures.size()eq 0}"  >
                                <img class="cloud-zoom kitchenimg" src="img/fff.jpg" data-large="img/fff.jpg" alt="" />
                                <a class="fullscreen-button" href="img/fff.jpg">
                                    <div class="product-fullscreen">
                                        <i class="icons icon-resize-full-1"></i>
                                    </div>
                                </a>
                                </ui:fragment>
                            </li>
                        </ul>
                    </div>
                    <div id="product-carousel">
                        <ul class="slides">
                            <ui:repeat value="#{galleryServiceBean.kithckengallery.pictures}" var="pictures">
                                <li>
                                    <a class="fancybox" rel="product-images" href="img/#{pictures.path}"></a>
                                    <img src="img/#{pictures.path}"  data-large="img/#{pictures.path}" alt=""/>
                                </li>
                            </ui:repeat>
                        </ul>
                        <div class="product-arrows">
                            <div class="left-arrow">
                                <i class="icons icon-left-dir"></i>
                            </div>
                            <div class="right-arrow">
                                <i class="icons icon-right-dir"></i>
                            </div>
                        </div>

                    </div>

                </div>

            </ui:define>
        </ui:composition>
    </h:body>
</html>